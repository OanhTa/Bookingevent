<div class="role-container p-4">
  <h2 class="text-2xl font-bold mb-4">Phân quyền</h2>

  <!-- Chọn nhóm quyền -->
  <div class="flex flex-col md:flex-row items-center justify-between gap-2 mt-3">
    <div class="flex items-center gap-1">
      <span class="font-medium">Chọn nhóm quyền:</span>
      <p-select 
        [options]="accountGroups" 
        [(ngModel)]="selectedGroupId" 
        (onChange)="onGroupChange($event)"  
        optionLabel="name" 
        optionValue="id" 
        placeholder="Select Group" 
        class="w-full md:w-56" />
    </div>

    <p-button (click)="showDialog()" label="Thêm nhóm"></p-button>
  </div>

  <!-- Bảng phân quyền -->
  <div class="overflow-x-auto mt-4">
    <table class="w-full border border-gray-200 text-center align-middle">
      <thead class="bg-gray-100">
        <tr>
          <th class="px-4 py-2 border">Module</th>
          <th class="px-4 py-2 border">Xem</th>
          <th class="px-4 py-2 border">Thêm</th>
          <th class="px-4 py-2 border">Sửa</th>
          <th class="px-4 py-2 border">Xóa</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let perm of permissions" class="hover:bg-gray-50">
          <td class="px-4 py-2 border">{{ perm.module }}</td>
          <td class="px-4 py-2 border">
            <input type="checkbox" [(ngModel)]="perm.actions.view" class="w-4 h-4 accent-green-600" />
          </td>
          <td class="px-4 py-2 border">
            <input type="checkbox" [(ngModel)]="perm.actions.add" class="w-4 h-4 accent-green-600" />
          </td>
          <td class="px-4 py-2 border">
            <input type="checkbox" [(ngModel)]="perm.actions.edit" class="w-4 h-4 accent-green-600" />
          </td>
          <td class="px-4 py-2 border">
            <input type="checkbox" [(ngModel)]="perm.actions.delete" class="w-4 h-4 accent-green-600" />
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Nút lưu -->
  <div class="flex justify-center mt-4">
    <button class="bg-green-600 hover:bg-green-700 text-white font-medium px-4 py-2 rounded flex items-center gap-2">
      <i class="bi bi-save"></i> Lưu kết quả
    </button>
  </div>

  <!-- Dialog -->
  <p-dialog header="Thêm nhóm quyền" [modal]="true" [(visible)]="visible" [style]="{ width: '25rem' }">
    
    <div class="flex items-center gap-4 mb-4">
      <label for="username" class="font-semibold w-24">Tên nhóm</label>
      <input pInputText id="username" class="flex-auto" autocomplete="off" />
    </div>

    <div class="flex items-center gap-4 mb-6">
      <label for="email" class="font-semibold w-24">Ghi chú</label>
      <input pInputText id="email" class="flex-auto" autocomplete="off" />
    </div>

    <div class="flex justify-end gap-2">
      <p-button label="Cancel" severity="secondary" (click)="visible = false"></p-button>
      <p-button label="Save" (click)="visible = false"></p-button>
    </div>
  </p-dialog>
</div>
