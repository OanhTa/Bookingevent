<div class="flex flex-col gap-4">
  <h2 class="text-2xl font-bold text-center">{{ formTitle }}</h2>

  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div *ngFor="let field of fields" class="flex flex-col gap-2">
      <label [for]="field.key" class="text-sm font-medium text-gray-700 mt-2">{{ field.label }}</label>
      
      <input
        *ngIf="field.type !== 'password'"
        [type]="field.type || 'text'"
        pInputText
        [id]="field.key"
        [formControlName]="field.key"
        [placeholder]="field.placeholder || ''"
        class="w-full"
      />

      <p-password
        *ngIf="field.type === 'password'"
        [id]="field.key"
        [formControlName]="field.key"
        [toggleMask]="true"
        autocomplete="off"
        [placeholder]="field.placeholder"
        promptLabel="Nhập mật khẩu"
        weakLabel="Quá yếu" 
        mediumLabel="Trung bình" 
        strongLabel="Mật khẩu mạnh"
        inputStyleClass="w-full">
        <ng-template #footer>
            <p-divider />
            <ul class="pl-2 my-0 leading-normal">
                <li>At least one lowercase</li>
                <li>At least one uppercase</li>
                <li>At least one numeric</li>
                <li>Minimum 8 characters</li>
            </ul>
        </ng-template>
      </p-password>

      <small class="text-red-500 text-sm" *ngIf="getControl(field.key)?.invalid && (getControl(field.key)?.touched || getControl(field.key)?.dirty)">
        <div *ngFor="let msg of getErrorMessages(getControl(field.key), field)">
          {{ msg }}
        </div>
      </small>
    </div>

    <p-button type="submit"
      [label]="submitLabel"
      [disabled]="form.invalid"
      styleClass="w-full mt-3">
    </p-button>
  </form>
</div>
